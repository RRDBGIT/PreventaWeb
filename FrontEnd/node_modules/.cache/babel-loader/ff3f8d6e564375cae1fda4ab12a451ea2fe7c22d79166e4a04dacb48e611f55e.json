{"ast":null,"code":"var _jsxFileName = \"C:\\\\PreventaWeb\\\\FrontEnd\\\\src\\\\components\\\\ProductoSelector.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport API from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductoSelector = ({\n  listaPreciosId,\n  onAdd\n}) => {\n  _s();\n  const [productos, setProductos] = useState([]);\n  const [busqueda, setBusqueda] = useState('');\n  const [cantidad, setCantidad] = useState(1);\n  useEffect(() => {\n    if (!listaPreciosId) return;\n    const cargarProductos = async () => {\n      try {\n        const res = await API.get(`/productos?lista=${listaPreciosId}`);\n        // âœ… Asegurarse de que Precio sea nÃºmero\n        const productosConPrecioNumerico = res.data.map(p => ({\n          ...p,\n          Precio: parseFloat(p.Precio) // <-- ConversiÃ³n clave\n        }));\n        setProductos(productosConPrecioNumerico);\n      } catch (error) {\n        console.error(\"Error al cargar productos\", error);\n      }\n    };\n    cargarProductos();\n  }, [listaPreciosId]);\n  const handleAdd = producto => {\n    if (!cantidad || cantidad <= 0) return alert(\"Cantidad invÃ¡lida\");\n    // âœ… Asegurar que el precio sea nÃºmero aquÃ­ tambiÃ©n\n    const precioNumerico = parseFloat(producto.Precio);\n    onAdd(producto, parseFloat(cantidad), precioNumerico);\n    setCantidad(1);\n  };\n  const filtrados = productos.filter(p => p.Codigo.toLowerCase().includes(busqueda.toLowerCase()) || p.Descripcion.toLowerCase().includes(busqueda.toLowerCase()));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      margin: '2rem 0',\n      padding: '1rem',\n      border: '1px solid #ddd',\n      borderRadius: '8px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"\\uD83D\\uDCE6 Seleccionar Producto\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Buscar por c\\xF3digo o descripci\\xF3n\",\n      value: busqueda,\n      onChange: e => setBusqueda(e.target.value),\n      style: {\n        width: '100%',\n        padding: '0.5rem',\n        marginBottom: '1rem'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"number\",\n      placeholder: \"Cantidad\",\n      value: cantidad,\n      onChange: e => setCantidad(e.target.value),\n      min: \"1\",\n      step: \"any\",\n      style: {\n        width: '100%',\n        padding: '0.5rem',\n        marginBottom: '1rem'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxHeight: '300px',\n        overflowY: 'auto',\n        border: '1px solid #ccc',\n        padding: '1rem'\n      },\n      children: filtrados.map(p => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '0.7rem',\n          borderBottom: '1px solid #eee',\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: p.Codigo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 29\n          }, this), \" - \", p.Descripcion, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 74\n          }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n            style: {\n              color: '#d73a49'\n            },\n            children: [\"$\", parseFloat(p.Precio).toFixed(2), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleAdd(p),\n          style: {\n            padding: '0.3rem 1rem',\n            backgroundColor: '#007bff',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: 'pointer'\n          },\n          children: \"\\u2795 Agregar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 25\n        }, this)]\n      }, p.IdProducto, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 9\n  }, this);\n};\n_s(ProductoSelector, \"b78EnTXScCB1DQS/K0LHZp+Z7RM=\");\n_c = ProductoSelector;\nexport default ProductoSelector;\nvar _c;\n$RefreshReg$(_c, \"ProductoSelector\");","map":{"version":3,"names":["React","useState","useEffect","API","jsxDEV","_jsxDEV","ProductoSelector","listaPreciosId","onAdd","_s","productos","setProductos","busqueda","setBusqueda","cantidad","setCantidad","cargarProductos","res","get","productosConPrecioNumerico","data","map","p","Precio","parseFloat","error","console","handleAdd","producto","alert","precioNumerico","filtrados","filter","Codigo","toLowerCase","includes","Descripcion","style","margin","padding","border","borderRadius","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","width","marginBottom","min","step","maxHeight","overflowY","borderBottom","display","justifyContent","alignItems","color","toFixed","onClick","backgroundColor","cursor","IdProducto","_c","$RefreshReg$"],"sources":["C:/PreventaWeb/FrontEnd/src/components/ProductoSelector.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport API from '../services/api';\n\nconst ProductoSelector = ({ listaPreciosId, onAdd }) => {\n    const [productos, setProductos] = useState([]);\n    const [busqueda, setBusqueda] = useState('');\n    const [cantidad, setCantidad] = useState(1);\n\n    useEffect(() => {\n        if (!listaPreciosId) return;\n        const cargarProductos = async () => {\n            try {\n                const res = await API.get(`/productos?lista=${listaPreciosId}`);\n                // âœ… Asegurarse de que Precio sea nÃºmero\n                const productosConPrecioNumerico = res.data.map(p => ({\n                    ...p,\n                    Precio: parseFloat(p.Precio) // <-- ConversiÃ³n clave\n                }));\n                setProductos(productosConPrecioNumerico);\n            } catch (error) {\n                console.error(\"Error al cargar productos\", error);\n            }\n        };\n        cargarProductos();\n    }, [listaPreciosId]);\n\n    const handleAdd = (producto) => {\n        if (!cantidad || cantidad <= 0) return alert(\"Cantidad invÃ¡lida\");\n        // âœ… Asegurar que el precio sea nÃºmero aquÃ­ tambiÃ©n\n        const precioNumerico = parseFloat(producto.Precio);\n        onAdd(producto, parseFloat(cantidad), precioNumerico);\n        setCantidad(1);\n    };\n\n    const filtrados = productos.filter(p =>\n        p.Codigo.toLowerCase().includes(busqueda.toLowerCase()) ||\n        p.Descripcion.toLowerCase().includes(busqueda.toLowerCase())\n    );\n\n    return (\n        <div style={{ margin: '2rem 0', padding: '1rem', border: '1px solid #ddd', borderRadius: '8px' }}>\n            <h3>ðŸ“¦ Seleccionar Producto</h3>\n            <input\n                type=\"text\"\n                placeholder=\"Buscar por cÃ³digo o descripciÃ³n\"\n                value={busqueda}\n                onChange={(e) => setBusqueda(e.target.value)}\n                style={{ width: '100%', padding: '0.5rem', marginBottom: '1rem' }}\n            />\n            <input\n                type=\"number\"\n                placeholder=\"Cantidad\"\n                value={cantidad}\n                onChange={(e) => setCantidad(e.target.value)}\n                min=\"1\"\n                step=\"any\"\n                style={{ width: '100%', padding: '0.5rem', marginBottom: '1rem' }}\n            />\n            <div style={{ maxHeight: '300px', overflowY: 'auto', border: '1px solid #ccc', padding: '1rem' }}>\n                {filtrados.map(p => (\n                    <div key={p.IdProducto} style={{ padding: '0.7rem', borderBottom: '1px solid #eee', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                        <div>\n                            <strong>{p.Codigo}</strong> - {p.Descripcion}<br/>\n                            <small style={{ color: '#d73a49' }}>\n                                ${parseFloat(p.Precio).toFixed(2)} {/* âœ… ConversiÃ³n directa aquÃ­ tambiÃ©n por seguridad */}\n                            </small>\n                        </div>\n                        <button\n                            onClick={() => handleAdd(p)}\n                            style={{\n                                padding: '0.3rem 1rem',\n                                backgroundColor: '#007bff',\n                                color: 'white',\n                                border: 'none',\n                                borderRadius: '4px',\n                                cursor: 'pointer'\n                            }}\n                        >\n                            âž• Agregar\n                        </button>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\nexport default ProductoSelector;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}